<html>
<head>
<title>Quinn Halpin, qmh4</title>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
<style>
	svg { border: solid #ccc 1px; }
	body { font-family: 'Alegreya Sans', Calibri, sans-serif; }
	.words {width : 700px;}
</style>
</head>
<body>
<div>
	<p id = "ball_animation"></p>
</div>
<script type = "text/javascript" src = "animation.js"></script>
<script type = "text/javascript" src = "jobs.js"></script>
<script type="text/javascript">
 	var la_2011_data = [];
 	var la_2012_data = [];
 	var la_2013_data = [];
 	var la_2014_data = [];
 	var la_2015_data = [];
	
	function parseRow(row) {
		// filter out name of person and entries that have no base pay
		if (Math.round(Number(row.base_pay)) != 0.){
			employee_object = row;
			delete employee_object["employee_name"];
			delete employee_object["notes"];
			employee_object["job_category"] = findCluster(row.job_title);
			return employee_object;
		}
	}

	d3.queue()
        .defer(d3.csv, "LA/los-angeles-2011.csv", parseRow)
        .defer(d3.csv, "LA/los-angeles-2012.csv")
        .defer(d3.csv, "LA/los-angeles-2013.csv")
        .defer(d3.csv, "LA/los-angeles-2014.csv")
        .defer(d3.csv, "LA/los-angeles-2015.csv")
        .await(load_data);

    function load_data(error, la_2011, la_2012, la_2013, la_2014, la_2015){
 		la_2011_data = la_2011;
 		la_2012_data = la_2012;
 		la_2013_data = la_2013;
 		la_2014_data = la_2014;
 		la_2015_data = la_2015;
 		
 		var ball_svg_height = 400;
		var ball_svg_width = 400;
		
		var ball_svg = d3.select("#ball_animation").append("svg")
		.attr("height", ball_svg_height)
		.attr("width", ball_svg_width);

		var tree_arr = createTreeBegin(ball_svg, {"x": 205, "y": 80}, 200, 200, 16, []);
 		spoutBalls(200, ball_svg, ball_svg_height, ball_svg_width, tree_arr, {"x": 205, "y": 90});
 		
 	}
</script>
</body>